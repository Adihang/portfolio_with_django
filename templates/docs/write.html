{% extends 'base.html' %}
{% block body_class %}docs-page{% endblock %}
{% block content %}
{% include 'docs/_assets_head.html' %}

<div class="docs-toolbar-wrap">
    <div class="docs-shell docs-toolbar">
        <div class="docs-toolbar-left">
            <div class="docs-title-row">
                <h1 class="docs-title">{% if write_mode == 'edit' %}{{ docs_text.write_title_edit }}{% else %}{{ docs_text.write_title_create }}{% endif %}</h1>
            </div>
            <div class="docs-subtitle docs-path-breadcrumbs">
                {% for crumb in write_breadcrumbs %}
                    {% if not forloop.first %}<span class="docs-path-sep">/</span>{% endif %}
                    <a class="docs-path-link" href="{{ crumb.url }}">{{ crumb.label }}</a>
                {% endfor %}
                {% if write_current_file_name %}
                    <span class="docs-path-sep">/</span>
                    <span class="docs-path-current">{{ write_current_file_name }}</span>
                {% endif %}
            </div>
        </div>
        <div class="docs-toolbar-right">
            {% include "docs/_auth_account.html" %}
            <div class="docs-toolbar-actions">
                <button class="docs-help-icon-link" type="button" id="docs-page-help-btn" aria-label="{{ docs_text.help_button }}" title="{{ docs_text.help_button }}"><span class="docs-help-icon-symbol" aria-hidden="true"></span></button>
                {% include "docs/_auth_button.html" %}
                <a class="docs-btn" href="{{ docs_base_url }}">{{ docs_text.list_button }}</a>
                <button class="docs-btn docs-btn-primary" type="button" id="docs-save-btn">{{ docs_text.save_button }}</button>
            </div>
        </div>
    </div>
</div>

<main
    class="docs-shell docs-content"
    data-docs-page="write"
    data-docs-base-url="{{ docs_base_url }}"
    data-save-api-url="{{ docs_api_save_url }}"
    data-preview-api-url="{{ docs_api_preview_url }}"
    data-mkdir-api-url="{{ docs_api_mkdir_url }}"
    data-write-mode="{{ write_mode }}"
    data-original-path="{{ original_relative_path }}"
    data-public-write-direct-save="{% if write_public_direct_save %}1{% else %}0{% endif %}"
    data-ui-lang="{{ ui_lang|default:'ko' }}"
>
    <div class="docs-form-grid">
        <label class="docs-field docs-field-full">
            <span>{{ docs_text.filename_label }}</span>
            <input type="text" id="docs-filename-input" value="{{ initial_filename }}" placeholder="{{ docs_text.filename_placeholder }}">
        </label>

        <div class="docs-field docs-field-full">
            <div class="docs-field-head">
                <label for="docs-content-input" class="docs-field-label">{{ docs_text.content_label }}</label>
                <div class="docs-content-snippet-tools">
                    <button class="docs-btn" type="button" id="docs-markdown-help-btn">{{ docs_text.markdown_guide_button }}</button>
                    <button class="docs-btn" type="button" id="docs-markdown-preview-btn">{{ docs_text.markdown_preview_button }}</button>
                </div>
            </div>
            <textarea id="docs-content-input" spellcheck="false">{{ initial_content }}</textarea>
        </div>
    </div>
</main>

<div id="docs-markdown-snippet-menu" class="docs-context-menu docs-markdown-context-menu" hidden>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="heading2">{{ docs_text.markdown_snippet_heading2 }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="heading3">{{ docs_text.markdown_snippet_heading3 }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="bold">{{ docs_text.markdown_snippet_bold }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="italic">{{ docs_text.markdown_snippet_italic }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="link">{{ docs_text.markdown_snippet_link }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="image">{{ docs_text.markdown_snippet_image }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="code_inline">{{ docs_text.markdown_snippet_code_inline }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="code_block">{{ docs_text.markdown_snippet_code_block }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="list_bullet">{{ docs_text.markdown_snippet_list_bullet }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="list_numbered">{{ docs_text.markdown_snippet_list_numbered }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="list_check">{{ docs_text.markdown_snippet_list_check }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="quote">{{ docs_text.markdown_snippet_quote }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="divider">{{ docs_text.markdown_snippet_divider }}</button>
    <button class="docs-md-snippet-btn" type="button" data-md-snippet="table">{{ docs_text.markdown_snippet_table }}</button>
</div>

{% include "popup/docs/save_modal.html" %}
{% include "popup/docs/page_help_modal.html" %}
{% include "popup/docs/markdown_help_modal.html" %}
{% include "popup/docs/markdown_preview_modal.html" %}
{% include "popup/docs/confirm_modal.html" %}
{% include "popup/docs/auth_logout_modal.html" %}

<datalist id="docs-directory-options"></datalist>

{{ docs_text|json_script:"docs-i18n" }}
{{ available_directories|json_script:"docs-directory-data" }}
{% include 'docs/_assets_script.html' %}
{% endblock %}
