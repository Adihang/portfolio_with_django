{% extends 'base.html' %}
{% load static static_versioned %}
{% block body_class %}docs-page{% endblock %}
{% block content %}
<link rel="stylesheet" href="{% static_v 'css/docs.css' %}" type="text/css">

<div class="docs-toolbar-wrap">
    <div class="docs-shell docs-toolbar">
        <div>
            <h1 class="docs-title">{% if write_mode == 'edit' %}문서 편집{% else %}문서 작성{% endif %}</h1>
            <div class="docs-subtitle">
                {% if write_mode == 'edit' %}/media/docs/{{ original_relative_path }}{% else %}새 마크다운 파일 작성{% endif %}
            </div>
        </div>
        <div class="docs-toolbar-actions">
            <button class="docs-btn docs-btn-primary" type="button" id="docs-save-btn">저장</button>
            <a class="docs-btn" href="{{ docs_base_url }}">목록</a>
        </div>
    </div>
</div>

<main
    class="docs-shell docs-content"
    data-docs-page="write"
    data-docs-base-url="{{ docs_base_url }}"
    data-save-api-url="{{ docs_api_save_url }}"
    data-mkdir-api-url="{{ docs_api_mkdir_url }}"
    data-write-mode="{{ write_mode }}"
    data-original-path="{{ original_relative_path }}"
>
    <div class="docs-form-grid">
        <label class="docs-field">
            <span>저장 위치</span>
            <input type="text" id="docs-dir-input" list="docs-directory-options" value="{{ initial_dir }}" placeholder="예: JavaScript">
        </label>
        <button type="button" class="docs-btn" id="docs-create-folder-btn">폴더 생성</button>

        <label class="docs-field docs-field-full">
            <span>파일명 (.md 제외)</span>
            <input type="text" id="docs-filename-input" value="{{ initial_filename }}" placeholder="예: hover">
        </label>

        <label class="docs-field docs-field-full">
            <span>내용</span>
            <textarea id="docs-content-input" spellcheck="false">{{ initial_content }}</textarea>
        </label>
    </div>

    <datalist id="docs-directory-options"></datalist>
</main>

{{ available_directories|json_script:"docs-directory-data" }}
<script src="{% static_v 'js/docs_page.js' %}" defer onerror="window.__reloadStaticScript(this)"></script>
{% endblock %}
