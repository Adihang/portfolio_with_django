{% extends 'base.html' %}
{% block body_class %}docs-page{% endblock %}
{% block content %}
{% include 'docs/_assets_head.html' %}

<div class="docs-toolbar-wrap">
    <div class="docs-shell docs-toolbar">
        <div class="docs-toolbar-left">
            <div class="docs-title-row">
                <h1 class="docs-title">{{ docs_text.list_title }}</h1>
                <button class="docs-help-icon-link" type="button" id="docs-page-help-btn" aria-label="{{ docs_text.help_button }}" title="{{ docs_text.help_button }}"><span class="docs-help-icon-symbol" aria-hidden="true"></span></button>
            </div>
            <div class="docs-subtitle docs-path-breadcrumbs">
                {% for crumb in breadcrumbs %}
                    {% if not forloop.first %}<span class="docs-path-sep">/</span>{% endif %}
                    {% if crumb.is_current %}
                        <span class="docs-path-current" data-docs-dir="{{ crumb.path|default:'' }}">{{ crumb.label }}</span>
                    {% else %}
                        <a class="docs-path-link" href="{{ crumb.url }}" data-docs-dir="{{ crumb.path|default:'' }}">{{ crumb.label }}</a>
                    {% endif %}
                {% endfor %}
            </div>
        </div>
        <div class="docs-toolbar-right">
            {% include "docs/_auth_account.html" %}
            <div class="docs-toolbar-actions">
                {% include "docs/_auth_button.html" %}
            </div>
        </div>
    </div>
</div>

<main
    class="docs-shell docs-content"
    data-docs-page="list"
    data-current-dir="{{ current_dir }}"
    data-current-dir-can-edit="{% if current_dir_can_edit %}1{% else %}0{% endif %}"
    data-current-dir-can-write-children="{% if current_dir_can_write_children %}1{% else %}0{% endif %}"
    data-docs-base-url="{{ docs_base_url }}"
    data-list-api-url="{{ docs_api_list_url }}"
    data-rename-api-url="{{ docs_api_rename_url }}"
    data-delete-api-url="{{ docs_api_delete_url }}"
    data-mkdir-api-url="{{ docs_api_mkdir_url }}"
    data-move-api-url="{{ docs_api_move_url }}"
    data-download-api-url="{{ docs_api_download_url }}"
    data-preview-api-url="{{ docs_api_preview_url }}"
    data-acl-api-url="{{ docs_api_acl_url }}"
    data-acl-options-api-url="{{ docs_api_acl_options_url }}"
    data-write-url="{{ docs_write_url }}"
    data-ui-lang="{{ ui_lang|default:'ko' }}"
>
    <div class="docs-list-layout" id="docs-list-layout">
        <div class="docs-list-pane">
            <ul id="docs-list" class="docs-list" aria-label="{{ docs_text.list_aria_label }}"></ul>
        </div>
        <aside class="docs-list-preview" id="docs-list-preview" aria-live="polite" aria-hidden="true" hidden>
            <header class="docs-list-preview-head">
                <h2 class="docs-list-preview-title" id="docs-list-preview-title">{{ docs_text.list_preview_title }}</h2>
                <div class="docs-list-preview-actions">
                    <a
                        id="docs-list-preview-download-btn"
                        class="docs-btn docs-list-preview-open-btn"
                        href="#"
                        hidden
                    >{{ docs_text.download_button }}</a>
                    <a
                        id="docs-list-preview-edit-btn"
                        class="docs-btn docs-list-preview-open-btn"
                        href="#"
                        hidden
                    >{{ docs_text.edit_button }}</a>
                    <button
                        id="docs-list-preview-delete-btn"
                        class="docs-btn docs-list-preview-open-btn"
                        type="button"
                        hidden
                    >{{ docs_text.delete_button }}</button>
                </div>
            </header>
            <div class="docs-list-preview-body">
                <article class="docs-markdown docs-list-preview-content" id="docs-list-preview-content">
                    <p class="docs-list-preview-placeholder">{{ docs_text.list_preview_empty }}</p>
                </article>
            </div>
        </aside>
    </div>
</main>

{% include "popup/docs/context_menu.html" %}

{% include "popup/docs/rename_modal.html" %}
{% include "popup/docs/folder_create_modal.html" %}

{% if docs_can_manage_acl %}
    {% include "popup/docs/permission_modal.html" %}
{% endif %}

{% include "popup/docs/confirm_modal.html" %}
{% include "popup/docs/auth_logout_modal.html" %}
{% include "popup/docs/page_help_modal.html" %}

{{ docs_text|json_script:"docs-i18n" }}
{{ initial_entries|json_script:"docs-initial-entries" }}
{% include 'docs/_assets_script.html' %}
{% endblock %}
